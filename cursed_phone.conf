#    ====================================  NICHOLAS FLECK PROUDLY PRESENTS  =====================================
# 
#    @@@@@@@  @@@  @@@  @@@@@@@    @@@@@@   @@@@@@@@  @@@@@@@     @@@@@@@   @@@  @@@   @@@@@@   @@@  @@@  @@@@@@@@  
#   @@@@@@@@  @@@  @@@  @@@@@@@@  @@@@@@@   @@@@@@@@  @@@@@@@@    @@@@@@@@  @@@  @@@  @@@@@@@@  @@@@ @@@  @@@@@@@@  
#   !@@       @@!  @@@  @@!  @@@  !@@       @@!       @@!  @@@    @@!  @@@  @@!  @@@  @@!  @@@  @@!@:@@@  @@!       
#   !@!       !@!  @!@  !@!  @!@  !@!       !@!       @@!  @!@    !@!  @!@  !@!  @!@  !@!  @!@  !@!!@!@!  !@!       
#   !@!       @!@  !@!  @!@!!@!   !!@@!!    @!!!:!    @!@  !@!    @!@@!@!   @!@!@!@!  @!@  !@!  @!@ !@@!  @!!!:!    
#   !!!       !@!  !!!  !!@!@!     !!@!!!   !!!!!:    !@!  !!!    !!@!!!    !!!@!!!!  !@!  !!!  !@!  !!!  !!!!!:    
#    :!!       !!:  !!!  !!: :!!        !:!  !!:       !!:  !!!    !!:       !!:  !!!  !!:  !!!  !!:  !!! !!!:       
#    :!:       :!:  !:!  :!:  !:!      !:!   :!:       :!:  !:!    :!:       :!:  !:!  :!:  !:!  :!:  !:!  :!:       
#    ::: :::  ::::: ::  ::   :::  :::: ::    :: ::::  ::::::::     ::       ::   :::  ::::::::   ::   ::   :: ::::  
#    :: :: :   : :  :    :   : :  :: : :    : :: ::   :: :  :      :         :   : :   : :  :   ::    :   : :: ::   
# 
#    ------------------------------------  THE LANDLINE STRAIGHT TO HELL!  --------------------------------------


# Phone type. Mainly affects which inputs control dialing.
# Valid values are:
#   - "rotary"      --> Rotary (enables rotary dial)
#   - "touchtone"   --> Touch-tone (enables keypad)
#   - "payphone"    --> Payphone (enables keypad)
#   - "other"       --> Other/unknown phone type
phone-type = "payphone"

# Number of times per second to update the engine.
# Higher is better, but will also consume more CPU cycles.
tick-rate = 60

# Post-Dial Delay
#   Delay (in seconds) to wait after the last digit is dialed,
#   before the phone attempts to place the call.
pdd = 4.0

# Delay (in seconds) before off-hook intercept message is played.
off-hook-delay = 20.0

# The maximum time (in seconds) between switch-hook dialing pulses when dialing a digit. 
manual-pulse-interval = 0.3

# Number of seconds phone must be on the hook to end the call.
# MUST be greater than manual-pulse-interval!
# (Only used if enable-switch-hook-dialing = true)
hangup-delay = 0.4

# Delay (in milliseconds) between dial leaving resting state and first valid pulse
# (Rotary mode only)
rotary-first-pulse-delay-ms = 300

# All feature properties are optional and will default to false.

# Allows host device to receive calls.
enable-incoming-calls = true

# Enables the motion sensor input.
enable-motion-sensor = true

# Enables the vibration motor output.
enable-vibration = true

# Enables the mechanical ringer output.
enable-ringer = true

# Enables switchhook dialing.
enable-switch-hook-dialing = true

# Enables microphone input features. (TODO)
# enable-mic = true

# Enables coin mechanism I/O and payment requirements on calls.
# (Payphone mode only)
enable-coin-mech = true

# Monetary value constants for coin triggers.
# Set values in terms of the smallest unit of your currency.
coin-values = [ 5, 25, 10 ]

# The default rate (in cents) applied to calls. Defaults to 0 (free).
# Certain services may opt to override this with their own rate.
standard-call-rate = 50

# Allows services to set their own prices.
enable-custom-service-rates = true

[sound]
# Affects all sounds
master-volume = 1.0

# Affects host-generated DTMF tones
dtmf-volume = 0.25
dtmf-tone-duration-ms = 80

# Call progress tone gain values per the North American Precise Tone Plan.
# These are purely for realism purposes and do not affect service behavior.
dial-tone-gain = -13.0
ringback-tone-gain = -19.0
busy-tone-gain = -24.0
off-hook-tone-gain = -4.0
special-info-tone-gain = -24.0

# Comfort noise controls
comfort-noise-volume = 0.35
comfort-noise-name = "ambient/comfort_noise"


[gpio.inputs]

# Switch hook

hook = { pin = 5, bounce-ms = 25, pull = "up" }

# Dial (pulse component)
dial-pulse = { pin = 2, bounce-ms = 25, pull = "up" }

# Dial (switch component)
dial-switch = { pin = 4, bounce-ms = 100, pull = "up" }

# Motion sensor
motion = { pin = 16, bounce-ms = 100, pull = "down" }

# Touch-tone keypad inputs
keypad-row-pins = [19, 13, 11, 9]

# Coin triggers
# Arrays must be the same length as coin_values.
coin-trigger-pins = [17, 27, 22]
coin-trigger-bounce-ms = [25, 25, 25]
coin-trigger-pull = "up"


[gpio.outputs]

# Ringer
pin-ringer = 17

# Vibration motor
pin-vibrate = 27

# Touch-tone keypad outputs
pins-keypad-cols = [16, 20, 21]


[debug]
# The panic tone plays when a Lua script encounters an error.
enable-panic-tone = true